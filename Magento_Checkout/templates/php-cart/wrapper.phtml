<?php
/**
 * Hyvä Themes - https://hyva.io
 * Copyright © Hyvä Themes. All rights reserved.
 * See COPYING.txt for license details.
 */

declare(strict_types=1);

use Magento\Checkout\Block\Cart;
use Magento\Framework\Escaper;

/** @var Cart $block */
/** @var Escaper $escaper */
?>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
    <!-- Left Column: Cart Items -->
    <div class="w-full order-2 lg:order-1">
        <?= $block->getChildHtml('form_before') ?>
        <?= $block->getChildHtml('cart-items') ?>

        <!-- Coupon Code -->
        <?php if ($couponBlock = $block->getLayout()->getBlock('checkout.cart.coupon')): ?>
            <div class="mt-8 card bg-white p-4 rounded shadow-sm border border-gray-200">
                <?= $couponBlock->toHtml() ?>
            </div>
        <?php endif; ?>

        <!-- Shipping Estimation -->
        <?php if ($shippingBlock = $block->getLayout()->getBlock('checkout.cart.shipping')): ?>
            <div class="mt-8 card bg-white p-4 rounded shadow-sm border border-gray-200">
                <?= $shippingBlock->toHtml() ?>
            </div>
        <?php endif; ?>

        <?= $block->getChildHtml('checkout_cart_widget') ?>
    </div>

    <!-- Right Column: Summary & Tools -->
    <div class="card w-full lg:sticky lg:top-4 order-1 lg:order-2">
        <h2 class="text-lg font-bold mb-4"><?= $escaper->escapeHtml(__('Summary')) ?></h2>

        <!-- The cart.summary container handles its own layout via XML (grid class) -->
        <div class="cart-summary">
            <?= $block->getChildHtml('cart.summary') ?>
        </div>
    </div>
</div>
